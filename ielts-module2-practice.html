<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 2 Practice - Finding Ideas Fast | IELTS Speaking</title>

    <!-- External Stylesheets -->
    <link rel="stylesheet" href="styles/practice-interface.css">
    <link rel="stylesheet" href="styles/module2-practice.css">
</head>
<body>
    <div class="practice-container">
        <!-- Header -->
        <header class="practice-header">
            <h1>ğŸ’¡ Module 2: Finding Ideas Fast</h1>
            <div class="header-actions">
                <a href="ielts-speaking-lessons.html" class="back-button">â¬…ï¸ Back to Lessons</a>
            </div>
        </header>

        <!-- Compact Progress Bar -->
        <div class="compact-progress">
            <div class="progress-info">
                <span class="progress-count" id="progressText">0/100</span>
                <span class="progress-label">completed</span>
            </div>
            <div class="progress-bar-mini">
                <div class="progress-fill-mini" id="progressBar"></div>
            </div>
        </div>

        <!-- Collapsible Options -->
        <div class="options-panel">
            <button class="options-toggle" id="optionsToggle" onclick="toggleOptions()">
                âš™ï¸ Options (Modes & Filters)
            </button>
            <div class="options-content" id="optionsContent" style="display: none;">
                <!-- Practice Modes -->
                <div class="practice-modes">
                    <label class="options-label">Practice Mode:</label>
                    <button class="mode-button active" data-mode="sequential" id="modeSequential">ğŸ“‹ Sequential</button>
                    <button class="mode-button" data-mode="random" id="modeRandom">ğŸ² Random</button>
                    <button class="mode-button" data-mode="favorites" id="modeFavorites">â­ Favorites</button>
                    <button class="mode-button" data-mode="incomplete" id="modeIncomplete">ğŸ”„ Incomplete</button>
                </div>

                <!-- Section Library Selector -->
                <div class="filter-section-inline">
                    <label class="options-label" for="sectionFilter">ğŸ“š Section Library:</label>
                    <select class="filter-select" id="sectionFilter">
                        <option value="all">All Practices (190 questions)</option>

                        <optgroup label="â”â”â” AUDIO LESSONS â”â”â”">
                            <option value="m2_intro">ğŸ“š The Idea Problem</option>
                            <option value="m2_5w1h">ğŸ“ The 5W1H Method</option>
                            <option value="m2_demo">ğŸ‘¨â€ğŸ« Teacher Demonstration</option>
                            <option value="m2_prep">ğŸ“– The PREP Method</option>
                            <option value="m2_past_present">â®ï¸ Past vs Present Comparison</option>
                            <option value="m2_personal_general">ğŸ‘¤ Personal + General Approach</option>
                            <option value="m2_contrast">âš–ï¸ The Contrast Technique</option>
                            <option value="m2_feelings">ğŸ’™ Feelings + Reasons Method</option>
                            <option value="m2_frequency">â° Frequency + Details Method</option>
                        </optgroup>

                        <optgroup label="â”â”â” TECHNIQUE PRACTICES â”â”â”">
                            <option value="m2_practice2" selected>ğŸ’¯ 5W1H Practice (100 questions)</option>
                            <option value="m2_prep_practice">ğŸ¯ PREP Method Practice (15 questions)</option>
                            <option value="m2_past_present_practice">â­ï¸ Past vs Present Practice (15 questions)</option>
                            <option value="m2_personal_general_practice">ğŸŒ Personal + General Practice (15 questions)</option>
                            <option value="m2_contrast_practice">âš¡ Contrast Technique Practice (15 questions)</option>
                            <option value="m2_feelings_practice">ğŸ’• Feelings + Reasons Practice (15 questions)</option>
                            <option value="m2_frequency_practice">ğŸ“Š Frequency + Details Practice (15 questions)</option>
                        </optgroup>

                        <optgroup label="â”â”â” GUIDED EXERCISES â”â”â”">
                            <option value="m2_practice1">âœï¸ Your Turn: Generate Ideas (1 question)</option>
                            <option value="m2_compare">ğŸ”„ Compare Your Approach (interactive)</option>
                            <option value="m2_selection_guide">ğŸ“ Technique Selection Guide</option>
                            <option value="m2_mixed_practice">ğŸ­ Mixed Practice (AI conversation)</option>
                        </optgroup>
                    </select>
                </div>

                <!-- Category Filter (only shown for 5W1H practice) -->
                <div class="filter-section-inline" id="categoryFilterSection">
                    <label class="options-label" for="categoryFilter">Category:</label>
                    <select class="filter-select" id="categoryFilter">
                        <option value="all">All Categories (100)</option>
                        <option value="hobbies">Hobbies & Interests</option>
                        <option value="daily">Daily Life</option>
                        <option value="sports">Activities & Sports</option>
                        <option value="technology">Technology & Media</option>
                        <option value="relationships">People & Relationships</option>
                        <option value="work">Learning & Work</option>
                        <option value="travel">Places & Travel</option>
                        <option value="food">Food & Cooking</option>
                        <option value="weather">Weather & Seasons</option>
                        <option value="shopping">Shopping & Fashion</option>
                        <option value="home">Home & Living</option>
                        <option value="arts">Arts & Entertainment</option>
                        <option value="nature">Nature & Environment</option>
                        <option value="transport">Transportation</option>
                        <option value="health">Health & Lifestyle</option>
                        <option value="celebrations">Celebrations & Festivals</option>
                        <option value="pets">Pets & Animals</option>
                        <option value="language">Language & Communication</option>
                        <option value="memory">Memory & Childhood</option>
                        <option value="time">Time Management</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Question Browser Panel -->
        <div class="question-browser-panel" id="questionBrowserPanel">
            <div class="browser-header">
                <button class="browser-toggle-btn" id="browserToggleBtn" onclick="toggleQuestionBrowser()">
                    <span class="toggle-icon" id="browserToggleIcon">â–¼</span>
                    <span class="toggle-text">ğŸ“– Browse Questions (<span id="browserQuestionCount">0</span> questions)</span>
                </button>
            </div>
            <div class="browser-content" id="browserContent" style="display: none;">
                <!-- View Toggle -->
                <div class="browser-controls">
                    <div class="view-toggle">
                        <button class="view-btn active" data-view="grid" onclick="switchBrowserView('grid')">â–¦ Grid</button>
                        <button class="view-btn" data-view="list" onclick="switchBrowserView('list')">â˜° List</button>
                    </div>
                    <div class="browser-filters">
                        <span style="margin-right: 10px;">Filter:</span>
                        <button class="filter-btn active" data-filter="all" onclick="filterQuestions('all')">All</button>
                        <button class="filter-btn" data-filter="favorites" onclick="filterQuestions('favorites')">â­ Favorites</button>
                        <button class="filter-btn" data-filter="completed" onclick="filterQuestions('completed')">âœ“ Completed</button>
                        <button class="filter-btn" data-filter="incomplete" onclick="filterQuestions('incomplete')">â—‹ Incomplete</button>
                    </div>
                </div>

                <!-- Grid View -->
                <div class="browser-grid" id="browserGrid"></div>

                <!-- List View -->
                <div class="browser-list" id="browserList" style="display: none;"></div>
            </div>
        </div>

        <!-- Quick Navigation Bar -->
        <div class="quick-nav-bar" id="quickNavBar">
            <div class="nav-input-group">
                <label for="jumpToInput">Go to Q#:</label>
                <input type="number" id="jumpToInput" min="1" placeholder="#" style="width: 60px;" onkeypress="if(event.key==='Enter') jumpToQuestionByInput()">
                <button class="btn-small" onclick="jumpToQuestionByInput()">Go</button>
            </div>
            <div class="nav-buttons">
                <button class="btn-small" onclick="jumpToQuestion(0)" title="First question">â®ï¸ First</button>
                <button class="btn-small" onclick="jumpRelative(-10)" title="Back 10 questions">â—€â—€ -10</button>
                <button class="btn-small" onclick="previousQuestion()" title="Previous question">â—€ Prev</button>
                <button class="btn-small" onclick="nextQuestion()" title="Next question">Next â–¶</button>
                <button class="btn-small" onclick="jumpRelative(10)" title="Forward 10 questions">+10 â–¶â–¶</button>
                <button class="btn-small" onclick="jumpToQuestion(practiceInterface.questions.length - 1)" title="Last question">â­ï¸ Last</button>
            </div>
            <div class="nav-smart-buttons">
                <button class="btn-small" onclick="jumpToRandom()">ğŸ² Random</button>
                <button class="btn-small" onclick="jumpToNextIncomplete()">â­ï¸ Next Incomplete</button>
            </div>
        </div>

        <!-- Question Card -->
        <div class="question-card" id="questionCard">
            <div class="question-header">
                <span class="question-number" id="questionNumber">Question 1/100</span>
                <span class="question-category" id="questionCategory">Category</span>
                <button class="favorite-button" id="favoriteButton" title="Add to favorites">â˜†</button>
            </div>

            <div class="question-text-large" id="questionText">Loading question...</div>

            <!-- Answer Input Section - Dynamic Form -->
            <div class="answer-section">
                <div class="section-header">
                    <h3 id="formTitle">ğŸ“ Your Answer</h3>
                    <p class="section-hint" id="formHint">Fill in the elements to build your answer</p>
                </div>

                <!-- Dynamic form container -->
                <div class="technique-form" id="techniqueFormContainer"></div>

                <!-- Answer Template Guide -->
                <div class="template-guide">
                    <div class="template-header">
                        <strong>ğŸ“ Answer Template:</strong>
                        <button class="template-toggle" id="templateToggleBtn" onclick="toggleTemplate()">Show</button>
                    </div>
                    <div class="template-content" id="templateContent" style="display: none;">
                        <p class="template-pattern">
                            I <span class="template-slot">[WHAT]</span>,
                            <span class="template-slot">[WHEN]</span>
                            <span class="template-slot">[WHERE]</span>
                            <span class="template-slot">[WHO]</span>.
                            <span class="template-slot">[WHY]</span>,
                            which makes me feel <span class="template-slot">[HOW]</span>.
                        </p>
                        <p class="template-note">
                            <strong>Example:</strong> I <strong>enjoy listening to jazz music</strong>,
                            <strong>particularly in the evenings</strong>
                            <strong>at home</strong>
                            <strong>alone</strong>.
                            <strong>Because it helps me relax</strong>,
                            which makes me feel <strong>calm and peaceful</strong>.
                        </p>
                    </div>
                </div>

                <!-- Real-time Answer Preview -->
                <div class="answer-preview">
                    <div class="preview-header">
                        <strong>ğŸ’¡ Your Complete Answer:</strong>
                        <span class="preview-hint">(Watch it build as you type!)</span>
                    </div>
                    <div class="preview-content" id="generatedAnswer">
                        <em>Start filling in the fields above to see your answer...</em>
                    </div>
                    <div class="preview-stats" id="previewStats">
                        <span class="stat-badge">0/6 elements used</span>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <button class="btn btn-primary" id="getFeedbackBtn" onclick="getAIFeedback()">ğŸ¤– Get AI Feedback</button>
                <button class="btn btn-success" id="markCompleteBtn" onclick="markComplete()">âœ“ Mark Complete</button>
                <button class="btn btn-secondary" id="skipBtn" onclick="skipQuestion()">â­ï¸ Skip</button>
            </div>
        </div>

        <!-- Sample Answer Section -->
        <div class="sample-answer-card" style="display: none;">
            <button class="sample-answer-toggle-btn" id="toggleSampleBtn" onclick="toggleSampleAnswer()">
                <span class="toggle-icon">â–¼</span>
                <span class="toggle-text">ğŸ’¡ Compare with Band 7-7.5 Sample Answer</span>
            </button>
            <div class="sample-answer-box" id="sampleAnswerBox" style="display: none;">
                <!-- Technique Breakdown -->
                <div class="5w1h-breakdown">
                    <h4 id="breakdownTitle">ğŸ“‹ Elements Used:</h4>
                    <div class="breakdown-grid" id="breakdownGrid"></div>
                </div>

                <div class="breakdown-divider"></div>

                <!-- Full Sample Answer -->
                <div class="full-sample-answer">
                    <h4>ğŸ“ Complete Answer (Band 7-7.5):</h4>
                    <p class="sample-text" id="sampleAnswerText">Sample answer will appear here...</p>
                </div>

                <div class="sample-tip">
                    <strong>ğŸ’¡ Tip:</strong> Compare the breakdown above with your own answer. Try to include at least 3-4 elements naturally in your response.
                </div>
            </div>
        </div>

        <!-- AI Feedback Section -->
        <div class="feedback-section" id="feedbackSection" style="display: none;">
            <div class="feedback-header">ğŸ’¬ AI Teacher Feedback</div>
            <div class="feedback-content" id="feedbackContent">Feedback will appear here...</div>
        </div>

        <!-- Navigation -->
        <div class="navigation-buttons">
            <button class="btn btn-secondary" id="prevBtn" onclick="previousQuestion()">â¬…ï¸ Previous</button>
            <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()">Next â¡ï¸</button>
        </div>

        <!-- Keyboard Shortcuts Hint -->
        <div class="shortcuts-hint">
            <strong>Keyboard Shortcuts:</strong><br>
            <kbd>N</kbd> Next â€¢ <kbd>P</kbd> Previous â€¢ <kbd>S</kbd> Show Sample â€¢ <kbd>F</kbd> Get Feedback
        </div>
    </div>

    <!-- External Scripts -->
    <script src="scripts/ieltsLessons.js"></script>
    <script src="scripts/ieltsCoachAI.js"></script>
    <script src="scripts/practiceInterface.js"></script>
    <script src="scripts/module2-config.js"></script>
    <script src="scripts/module2-practice.js"></script>
</body>
</html>
